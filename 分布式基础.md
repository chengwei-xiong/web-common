## 分布式基础
概述：本文介绍在分布式系统基本的理论基础，针对一些关键的机制做了详细的解释并用具体的商业产品进行解释。

### 基本概念

* 节点Node：独立的程序服务，可能是同一个进程下的服务，也可能是同台机器的不同进程
* 通信： 通过网络进行通信
* 存储：数据的持久化，就是数据写入磁盘或者SSD中
* 异常：机器宕机，网络异常，存储数据异常，请求的三状态成功，超时，异常错误

### 数据/节点的分布（Sharding分片）

* Hash方式
* 按数据范围分布
* 按数据量分布
* 一致性Hash
* 本地化计算

### 数据的高可用（Replication副本）
概述：在分布式系统当中，为了提供高可用的服务，避免网络分化，机器宕机等导致的服务/数据不可用的情况发生，一般都会为服务/数据提供多副本的机制，副本是指在分布式系统中为数据/服务提供的重复性，对于数据副本是指在不同的节点上持久化相同一份数据，当出现某一个几点上存储的数据发生丢失时，可以从其他的副本上读取数据。数据副本是分布式系统解决数据丢失异常的唯一手段；另一类服务副本是指在大规模的分布式无状态的计算模型下，在不同的节点部署了相同的服务。

GFS系统中的Chunk的数个副本就是典型的数据副本模型，MapReduce系统的JobWorker则是典型的服务副本模型。

#### 副本协议

* 中心化副本控制协议
	* 主从架构的中心化副本控制协议
* 去中心化副本控制协议

#### 副本的一致性
概述：分布式心跳通过副本控制协议，是的从系统外部读取系统内部各个副本的数据在一定的约束条件下是相同的，根据条件的约束，分为：

强一致性：

单调一致性：

会话一致性：

最终一致性：

弱一致性：一旦某一个更新成功，用户无法再一个确定时间内读到这次更新的值，切即使在某个副本上读到新的值，也不能保证能在其他副本中读取到最新的值。

* Lease机制

	Lease就是一把带有超时机制的分布式锁，如果没有Lease，分布式环境中的锁可能会因为锁拥有者的失败而导致死锁，有了lease死锁 会被控制在超时时间之内

* Paxos
* Raft
* 2PC,3PC
* Quorum

### CAP理论与实践
